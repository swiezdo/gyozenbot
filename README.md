# Gyozen Bot

Telegram бот для игры Ghost of Tsushima: Legends с AI-функциональностью.

## Описание

Этот бот предоставляет:
- Диалоги с персонажем Gyozen в стиле игры
- Генерацию изображений через AI
- Информацию о волнах и трофеях
- Интеграцию с Mini App

## Технологии

- **Python 3.8+**
- **python-telegram-bot** - библиотека для работы с Telegram Bot API
- **SQLite** - база данных пользователей
- **AI Client** - интеграция с внешним AI сервисом

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd gyozenbot
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate     # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Настройте конфигурацию:
```bash
cp config.py config_local.py
# Отредактируйте config_local.py с вашими токенами и настройками
```

## Запуск

```bash
python main.py
```

## Функциональность

### Диалоги
- Различные стили диалогов с Gyozen
- Контекстные ответы на основе истории игры
- Персонализированные фразы ожидания

### Генерация изображений
- AI-генерация изображений по запросам
- Интеграция с внешним сервисом генерации

### Информация о игре
- Данные о волнах (waves.json)
- Информация о трофеях (trophy.json)
- Статистика и достижения

### Интеграция с Mini App
- Связь с фронтенд приложением
- Обмен данными между ботом и веб-приложением

## Структура проекта

```
gyozenbot/
├── handlers/           # Обработчики команд и сообщений
│   ├── gyozen.py      # Основные диалоги
│   ├── miniapp.py     # Интеграция с Mini App
│   └── waves.py       # Информация о волнах
├── main.py            # Главный файл запуска
├── config.py          # Конфигурация
├── database.py        # Работа с базой данных
├── ai_client.py        # Клиент для AI сервиса
├── image_generator.py  # Генерация изображений
├── keyboards.py        # Клавиатуры бота
├── dialogue_styles.py  # Стили диалогов
├── waiting_phrases.py  # Фразы ожидания
├── trophy.json         # Данные о трофеях
├── waves.json          # Данные о волнах
└── requirements.txt    # Зависимости
```

## Конфигурация

Основные настройки в `config.py`:
- Токен Telegram бота
- Настройки AI сервиса
- Параметры базы данных
- Настройки генерации изображений

## Безопасность

- Хранение токенов в переменных окружения
- Валидация входящих данных
- Логирование действий пользователей

## Развертывание

Для развертывания на сервере рекомендуется использовать:
- systemd сервис для автозапуска
- Docker для контейнеризации
- Логирование в файлы

## Лицензия

MIT License
